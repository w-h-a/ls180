Here's my step-by-step walk through for assignment 10.

PART I
I created an extrasolar database. We are not really given much of a conceptual schema, but I gather two entity classes are _star_ and _planet_. To construct a relation schema that corresponds to _star_ and a relation schema that corresponds to _planet_:

```sql
create table star(
  id int generated by default as identity primary key,
  name varchar(25) not null unique,
  distance int not null check(distance > 0),
  spectral_type char(1),
  companions int not null check(companions >= 0)
);

create table planet(
  id int generated by default as identity primary key,
  designation char(1) unique,
  mass int
);
```

Compare Launch's:

```sql
CREATE TABLE stars (
  id serial PRIMARY KEY,
  name varchar(25) UNIQUE NOT NULL,
  distance integer NOT NULL CHECK (distance > 0),
  spectral_type char(1),
  companions integer NOT NULL CHECK (companions >= 0)
);

CREATE TABLE planets (
  id serial PRIMARY KEY,
  designation char(1),
  mass integer
);
```

PART II
To add an orbits relation schema that corresponds to an _orbits_ relationship class:

```sql
create table orbits(
  id int generated by default as identity primary key,
  planet_id int references planet(id) not null,
  star_id int references star(id) not null
);
```

I think either solution is fine; they each have trade-offs. The official solution is a straightforward implementation of a conceptual schema that follows Barker's approach pretty rigidly. A more semantic way (i.e., a planet orbits a star) uses an approach that is a hybrid of Barker and Chen's at the conceptual level. There will be corresponding differences at the implementation level. As you can see, relationship classes also get relation schemas on the alternative approach. I also like how this unifies how we handle one-many and many-many at the implementation level.

Compare Launch's:

```sql
ALTER TABLE planets
ADD COLUMN star_id integer NOT NULL REFERENCES stars (id);
```

PART III
To alter the star relation schema with respect to how many characters are allowed in the name attribute:

```sql
alter table star alter column name type varchar(50);
```

Compare Launch's:

```sql
ALTER TABLE stars
ALTER COLUMN name TYPE varchar(50);
```

PART IV
To alter the star relation schema with respect to the type of distance:

```sql
alter table star alter column distance type numeric;
```

Compare Launch's:

```sql
ALTER TABLE stars
ALTER COLUMN distance TYPE numeric;
```

PART V
To add the relevant constraints to `spectral_type`:

```sql
alter table star add check(spectral_type in ('O', 'B', 'A', 'F', 'G', 'K', 'M'));
alter table star alter column spectral_type set not null;
```

Compare Launch's:

```sql
ALTER TABLE stars
ADD CHECK (spectral_type IN ('O', 'B', 'A', 'F', 'G', 'K', 'M')),
ALTER COLUMN spectral_type SET NOT NULL;
```

PART VI
To remove the previous constraint on `spectral_type` and instead change the type of `spectral_type`:

```sql
alter table star drop constraint star_spectral_type_check;
create type spectral_type_enum as enum('O', 'B', 'A', 'F', 'G', 'K', 'M');
alter table star alter column spectral_type type spectral_type_enum using spectral_type::spectral_type_enum;
```

Compare Launch's:

```sql
ALTER TABLE stars
DROP CONSTRAINT stars_spectral_type_check;

CREATE TYPE spectral_type_enum AS ENUM ('O', 'B', 'A', 'F', 'G', 'K', 'M');

ALTER TABLE stars
ALTER COLUMN spectral_type TYPE spectral_type_enum
                           USING spectral_type::spectral_type_enum;
```

PART VII
To modify `mass` to require positive factional masses to any degree of precision and `designation` to require some value:

```sql
alter table planet
  alter column designation set not null,
  alter column mass set not null,
  add check(mass > 0),
  alter column mass type numeric;
```

Compare Launch's

```sql
ALTER TABLE planets
ALTER COLUMN mass TYPE numeric,
ALTER COLUMN mass SET NOT NULL,
ADD CHECK (mass > 0.0),
ALTER COLUMN designation SET NOT NULL;
```

PART VIII
To add an additional attribute---`semi_major_axis`---to the planet relation schema:

```sql
alter table planet add column semi_major_axis numeric not null;
```

Compare Launch's

```sql
ALTER TABLE planets
ADD COLUMN semi_major_axis numeric NOT NULL;
```

PART IX
To add a relation schema that corresponds to a _moon_ entity class:

```sql
create sequence designation_sequence start 1 increment 1;

create table moon(
  id int generated by default as identity primary key,
  designation int not null default nextval('designation_sequence'),
  semi_major_axis numeric check(semi_major_axis > 0),
  mass numeric check(mass > 0)
);

alter table orbits add column moon_id int references moon(id);
```

For this to make sense, you might have to [go](https://launchschool.com/exercises/f7bbde72) see my previous.

Compare Launch's:

```sql
CREATE TABLE moons (
  id serial PRIMARY KEY,
  designation integer NOT NULL CHECK (designation > 0),
  semi_major_axis numeric CHECK (semi_major_axis > 0.0),
  mass numeric CHECK (mass > 0.0),
  planet_id integer NOT NULL REFERENCES planets (id)
);
```

PART X
